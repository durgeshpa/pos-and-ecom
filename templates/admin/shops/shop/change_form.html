{% extends "admin/change_form.html" %} {% load i18n %}

{% block content %}
{{ block.super }}
<style>
        .required_field_red::after {
            content: "*";
            color: red;
            margin-left: 2px;
        }


</style>
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlNhapfCsrCM0MKydAsq4C5IvrD10GKJM&libraries=places&callback=initialize">
</script>
    <script>
        function initialize() {
          var input = document.getElementsByName('shop_location');
          var autocomplete = new google.maps.places.Autocomplete(input);
          google.maps.event.addListener(autocomplete, 'place_changed', function () {
                var place = autocomplete.getPlace();
                document.getElementsByName('latitude').value = place.geometry.location.lat();
                document.getElementsByName('longitude').value = place.geometry.location.lng();
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<script>
        $(document).ready(function(jQuery) {
            function enableForPosAction () {
                shop_type = $("#id_shop_type").children("option:selected").text();
                if (shop_type == 'Franchise - foco' || shop_type == 'Franchise - fofo'){
                    $('.field-pos_enabled').removeClass('hidden');
                    $('.field-latitude').removeClass('hidden');
                    $('.field-longitude').removeClass('hidden');
                    $('.field-shop_location').addClass('hidden');
                }
                else if(shop_type == 'Retailer - gm'){
                    $('.field-pos_enabled').addClass('hidden');
                    $('.field-latitude').removeClass('hidden');
                    $('.field-longitude').removeClass('hidden');
                    $('.field-shop_location').removeClass('hidden');
                }
                else {
                    $('.field-pos_enabled').addClass('hidden');
                    $('.field-latitude').addClass('hidden');
                    $('.field-longitude').addClass('hidden');
                    $('#id_pos_enabled').prop("checked", false);
                    $('#id_latitude').val(0);
                    $('#id_longitude').val(0);
                    $('.field-shop_location').addClass('hidden');
                }
            }

            enableForPosAction();

            document.getElementById('id_shop_type').onchange = function() {
                enableForPosAction();
            };
        });


</script>

{% endblock %}