{% extends "admin/change_form.html" %} {% load i18n %}

{% block content %}
{{ block.super }}
<style>
        .required_field_red::after {
            content: "*";
            color: red;
            margin-left: 2px;
        }


</style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAU5dn61zE0lb83wcXAbDiBEHAxh4kTBRw&libraries=places">
</script>
    <script>
        let autocomplete = new google.maps.places.Autocomplete($("#id_shop_location")[0], {
            componentRestrictions: {country: ["in"]}
        });

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
                let place = autocomplete.getPlace();
                $('#id_latitude').val(place.geometry.location.lat());
                $('#id_longitude').val(place.geometry.location.lng());
            });
    </script>
<script>
        $(document).ready(function(jQuery) {
            function enableForPosAction () {
                shop_type = $("#id_shop_type").children("option:selected").text();
                if (shop_type == 'Franchise - foco' || shop_type == 'Franchise - fofo'){
                    $('.field-pos_enabled').removeClass('hidden');
                }
                else {
                    $('.field-pos_enabled').addClass('hidden');
                    {#$('.field-latitude').addClass('hidden');#}
                    {#$('.field-longitude').addClass('hidden');#}
                    $('#id_pos_enabled').prop("checked", false);
                    {#$('.field-shop_location').addClass('hidden');#}
                }
            }

            enableForPosAction();

            document.getElementById('id_shop_type').onchange = function() {
                enableForPosAction();
            };
            function approvalReasonAction () {
                approval_status = $("#id_approval_status").children("option:selected").text();
                approval_status_reason = $("#id_approval_status_reason").children("option:selected").val();
                if (approval_status == 'Approved' || approval_status == 'Disapproved'){
                    $('.field-approval_status_reason').removeClass('hidden');
                    if (approval_status == 'Approved') {
                        $('#id_approval_status_reason').find('option').remove();
                        $("#id_approval_status_reason").append($("<option></option>").val("LOCATION_STARTED").html("Location Started"));
                        $("#id_approval_status_reason").append($("<option></option>").val("SHOP_ONBOARDED").html("Shop Onboarded"));
                    }
                    else {
                        $('#id_approval_status_reason').find('option').remove();
                        $("#id_approval_status_reason").append($("<option></option>").val("BUSINESS_CLOSED").html("Business Closed"));
                        $("#id_approval_status_reason").append($("<option></option>").val("BLOCKED_BY_GRAMFACTORY").html("Blocked by Gramfactory"));
                        $("#id_approval_status_reason").append($("<option></option>").val("NOT_SERVING_SHOP_LOCATION").html("Not Serving Shop Location"));
                        $("#id_approval_status_reason").append($("<option></option>").val("PERMANENTLY_CLOSED").html("Permanently Closed"));
                        $("#id_approval_status_reason").append($("<option></option>").val("MISBEHAVIOUR_OR_DISPUTE").html("Misbehaviour or Dispute"));
                        $("#id_approval_status_reason").append($("<option></option>").val("REGION_NOT_SERVICED").html("Region Not Serviced"));
                        $("#id_approval_status_reason").append($("<option></option>").val("MULTIPLE_SHOP_IDS").html("Multiple Shop Ids"));
                        $("#id_approval_status_reason").append($("<option></option>").val("FREQUENT_CANCELLATION_HOLD_AND_RETURN_OF_ORDERS").html("Frequent Cancellation, Return And Holds Of Orders"));
                        $("#id_approval_status_reason").append($("<option></option>").val("MOBILE_NUMBER_LOST_CLOSED_CHANGED").html("Mobile Number Changed"));
                    }
                    $("#id_approval_status_reason").val(approval_status_reason);
                }
                else {
                    $('#id_approval_status_reason').find('option').remove();
                    $('.field-approval_status_reason').addClass('hidden');
                }
            }

            approvalReasonAction();

            document.getElementById('id_approval_status').onchange = function() {
                approvalReasonAction();
            };
        });


</script>

{% endblock %}